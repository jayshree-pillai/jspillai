Feature: Select LLM model from configuration by environment
This covers defining models in config, deterministic env-based selection, optional override, and fail-fast when misconfigured.

Scenario: Runtime selects the model deterministically based on env
Given models are defined in configuration with stable model_ids and deployment settings
And environment "dev" is configured to use model_id "model_dev"
When I run a section in environment "dev"
Then the runtime selects model_id "model_dev"
And the selected model_id is recorded in the run output/telemetry

Scenario: Runtime selects a different model for a different env
Given environment "prod" is configured to use model_id "model_prod"
When I run a section in environment "prod"
Then the runtime selects model_id "model_prod"
And the selected model_id is recorded in the run output/telemetry

Scenario: Optional model override replaces the env default
Given environment "dev" is configured to use model_id "model_dev"
And model_id "model_override" exists in configuration
When I run a section in environment "dev" with model override "model_override"
Then the runtime selects model_id "model_override"
And the run output/telemetry records that the override was applied

Scenario: Missing model configuration fails fast before any LLM call
Given environment "dev" is configured to use model_id "model_dev"
But no model configuration exists for model_id "model_dev"
When I run a section in environment "dev"
Then the runtime returns a "MODEL_CONFIG_NOT_FOUND" error
And no LLM call is attempted

Scenario: Invalid model configuration fails fast before any LLM call
Given a model configuration exists for model_id "model_dev"
But the configuration is invalid or incomplete
When the runtime loads model configuration for environment "dev"
Then the runtime returns a "MODEL_CONFIG_INVALID" error
And no LLM call is attempted
